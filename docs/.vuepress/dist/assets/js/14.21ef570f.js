(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{175:function(a,t,s){"use strict";s.r(t);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证","aria-hidden":"true"}},[a._v("#")]),a._v(" 验证")]),a._v(" "),s("h2",{attrs:{id:"方法验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法验证","aria-hidden":"true"}},[a._v("#")]),a._v(" 方法验证")]),a._v(" "),s("p",[a._v("huiche默认已经引入了JSR-305"),s("code",[a._v("com.google.code.findbugs:jsr305")]),a._v(",用其提供的注解,对方法的参数和返回值进行验证")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("javax.annotation.Nonnull")])]),a._v(" "),s("li",[s("code",[a._v("javax.annotation.Nullable")])])]),a._v(" "),s("h3",{attrs:{id:"当添加在方法参数上时"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#当添加在方法参数上时","aria-hidden":"true"}},[a._v("#")]),a._v(" 当添加在方法参数上时")]),a._v(" "),s("p",[a._v("@Nonnull 表示,该参数不允许传入null\n@Nullable 表示,该参数可以传入null")]),a._v(" "),s("h3",{attrs:{id:"当添加在方法上时"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#当添加在方法上时","aria-hidden":"true"}},[a._v("#")]),a._v(" 当添加在方法上时")]),a._v(" "),s("p",[a._v("@Nonnull 表示,该方法不会返回null\n@Nullable 表示,该方法可能返回null")]),a._v(" "),s("h3",{attrs:{id:"为什么要这么做"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么要这么做","aria-hidden":"true"}},[a._v("#")]),a._v(" 为什么要这么做?")]),a._v(" "),s("ul",[s("li",[a._v("方便多人协作开发,减少不必要的重复判断,我的方法标注某参数@Nonnull,则应该由调用方法的地方进行判断,以满足调用方法的条件,当方法标注@Nonnull时,便不允许返回null,调用方法的用户也不必进行判断")]),a._v(" "),s("li",[a._v("为了配合IDE静态分析,尽可能的发现隐藏的bug")])]),a._v(" "),s("h3",{attrs:{id:"方法验证示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法验证示例","aria-hidden":"true"}},[a._v("#")]),a._v(" 方法验证示例")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Demo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Nonnull")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" String "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("introduce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Nonnull")]),a._v(" String name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Nullable")]),a._v(" String hobby"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("null"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v("hobby"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"我的名字是:"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('", 我没有特别喜欢的东西"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"我的名字是:"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('", 我喜欢"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" hobby"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h2",{attrs:{id:"数据验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据验证","aria-hidden":"true"}},[a._v("#")]),a._v(" 数据验证")]),a._v(" "),s("p",[a._v("huiche默认引入了JSR-303/380"),s("code",[a._v("Bean Validation")]),a._v(" 用于数据验证")]),a._v(" "),s("blockquote",[s("p",[a._v("默认仅在Dao层的"),s("code",[a._v("create/creates")]),a._v("和"),s("code",[a._v("updata/updates")]),a._v("方法中验证")])]),a._v(" "),s("h3",{attrs:{id:"数据验证示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据验证示例","aria-hidden":"true"}},[a._v("#")]),a._v(" 数据验证示例")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Student")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BaseEntity")]),s("span",{pre:!0,attrs:{class:"token generics function"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("Student"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@NotEmpty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("message "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"姓名不能为空"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" groups "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" ValidOnlyCreate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Length")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("message "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"姓名不能超过6个字符"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" max "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" String name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@NotNull")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("message "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"性别不能为空"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" groups "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" ValidOnlyCreate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" Integer sex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("将会进行如下验证")]),a._v(" "),s("ul",[s("li",[a._v("CrudDao执行create时\n"),s("ul",[s("li",[a._v("验证姓名"),s("code",[a._v("name")]),a._v("不能为空或空字符串,且长度不能超过6")]),a._v(" "),s("li",[a._v("验证性别"),s("code",[a._v("sex")]),a._v("不能是null")])])]),a._v(" "),s("li",[a._v("CrudDao执行update时\n"),s("ul",[s("li",[a._v("验证姓名"),s("code",[a._v("name")]),a._v("长度不能超过6\n您可能已经看出来,"),s("code",[a._v("ValidOnlyCreate")]),a._v("表示仅在create时验证")])])])]),a._v(" "),s("h3",{attrs:{id:"如何取消默认验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何取消默认验证","aria-hidden":"true"}},[a._v("#")]),a._v(" 如何取消默认验证?")]),a._v(" "),s("ul",[s("li",[a._v("重写CrudDao的"),s("code",[a._v("doValid")]),a._v("方法,返回"),s("code",[a._v("false")]),a._v("(推荐)")]),a._v(" "),s("li",[a._v("重写"),s("code",[a._v("validOnCreate")]),a._v("和"),s("code",[a._v("validRegular")]),a._v("的实现")])]),a._v(" "),s("h3",{attrs:{id:"手动验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#手动验证","aria-hidden":"true"}},[a._v("#")]),a._v(" 手动验证")]),a._v(" "),s("p",[a._v("内置了"),s("code",[a._v("ValidationUtil")]),a._v("可以注入使用,自行在合适的地方验证即可")])])}],!1,null,null,null);t.default=e.exports}}]);